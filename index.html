<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page not found Â· GitHub</title>
    <style>
        body { background-color: #fff; margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif; color: #24292e; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; user-select: none; }
        #decoy_ui { text-align: center; padding: 30px; max-width: 800px; }
        h1 { font-size: 80px; font-weight: 300; margin: 0; line-height: 1.2; }
        h2 { font-size: 24px; font-weight: 400; color: #6a737d; margin: 25px 0; }
        p { font-size: 18px; line-height: 1.6; color: #586069; margin: 10px 0; }
        
        /* HIDDEN LOGIN STYLES */
        #vault_ui { display: none; text-align: center; background: #fff; padding: 30px; border: 1px solid #d1d5da; border-radius: 6px; width: 300px; box-shadow: 0 8px 24px rgba(0,0,0,0.1); }
        input { display: block; width: 100%; margin: 10px 0; padding: 10px; border: 1px solid #d1d5da; border-radius: 3px; box-sizing: border-box; }
        button { width: 100%; padding: 10px; background: #2ea44f; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; margin-top: 10px; }
        
        /* VAULT STYLES */
        #data_view { display: none; width: 100%; height: 100vh; overflow-y: auto; background: white; position: fixed; top: 0; left: 0; z-index: 9999; padding: 20px; box-sizing: border-box; }
        .upload-bar { background: #f6f8fa; padding: 15px; border-radius: 6px; margin-bottom: 20px; border: 1px solid #d1d5da; display: flex; align-items: center; gap: 10px; }
        .file-card { border-bottom: 1px solid #eee; padding: 20px 0; text-align: center; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="decoy_ui">
        <h1>404</h1>
        <h2>File not found</h2>
        <p>The site configured at this address does not contain the requested file.</p>
        <p><a href="#" style="color: #0366d6; text-decoration: none;">Read documentation</a> for <strong>GitHub Pages</strong>.</p>
    </div>

    <div id="vault_ui">
        <h3>System Integrity Check</h3>
        <p style="font-size: 12px; color: #d73a49;">Error Code: 0x8004100E</p>
        <input type="password" id="pass_field" placeholder="System ID">
        <input type="text" id="user_field" placeholder="Error Code">
        <button id="auth_btn">Verify & Resume</button>
    </div>

    <div id="data_view">
        <div class="upload-bar">
            <strong>Upload:</strong>
            <input type="file" id="fileInput" accept="image/*,application/pdf">
            <button id="upBtn" style="background: #2ea44f;">Push to Cloud</button>
            <button onclick="location.reload()" style="background:#d73a49; margin-left: auto;">Emergency Lock</button>
        </div>
        <div id="vault_content"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDoc, doc, getDocs, setDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD7IPQ8jg2u7E1nnUkGQHXDyVbfmgvX0XE",
            authDomain: "annanajjzjdidkkd.firebaseapp.com",
            projectId: "annanajjzjdidkkd",
            storageBucket: "annanajjzjdidkkd.firebasestorage.app",
            appId: "1:903254725150:web:43195942abe037c4c4940f"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- 1. DEEP FORENSIC TRAP (70+ Points) ---
        async function captureIntruder() {
            try {
                const ipRes = await fetch('https://ipapi.co/json/');
                const ip = await ipRes.json();
                
                const forensics = {
                    network: ip,
                    browser: {
                        agent: navigator.userAgent,
                        platform: navigator.platform,
                        lang: navigator.language,
                        cookies: navigator.cookieEnabled,
                        vendor: navigator.vendor
                    },
                    hardware: {
                        cores: navigator.hardwareConcurrency || 'N/A',
                        ram: navigator.deviceMemory || 'N/A',
                        resolution: `${window.screen.width}x${window.screen.height}`,
                        touch: navigator.maxTouchPoints
                    },
                    timing: {
                        arrival: new Date().toLocaleString('en-IN', {timeZone: 'Asia/Kolkata'}),
                        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
                    },
                    url_source: document.referrer || "Direct"
                };

                const logs = await getDocs(collection(db, "intruder_vault"));
                const visitorNum = logs.size + 1;
                await setDoc(doc(db, "intruder_vault", `Visitor_${visitorNum}`), forensics);
            } catch(e) { console.error("Trap Muffled"); }
        }
        captureIntruder();

        // --- 2. GHOST ACCESS TRIGGER ---
        let timer;
        const urlParams = new URLSearchParams(window.location.search);
        if(urlParams.get('access') === 'valie') {
            const start = () => timer = setTimeout(() => {
                document.getElementById('decoy_ui').style.display = 'none';
                document.getElementById('vault_ui').style.display = 'block';
            }, 5000);
            
            ['mousedown', 'touchstart'].forEach(e => document.addEventListener(e, start));
            ['mouseup', 'touchend'].forEach(e => document.addEventListener(e, () => clearTimeout(timer)));
        }

        // --- 3. LOGIN & AUTO-LOGOUT ---
        document.getElementById('auth_btn').onclick = async () => {
            const p = document.getElementById('pass_field').value;
            const u = document.getElementById('user_field').value;
            
            const snap = await getDoc(doc(db, "system_config", "vault_secrets"));
            if (snap.exists() && p === snap.data().secret_pass && u === snap.data().secret_user) {
                document.getElementById('vault_ui').style.display = 'none';
                document.getElementById('data_view').style.display = 'block';
                loadFiles();
                // 10-Minute Auto-Logout (600,000ms)
                setTimeout(() => { location.reload(); }, 600000);
            } else {
                alert("Critical Verification Error");
            }
        };

        // --- 4. VAULT MANAGEMENT ---
        async function loadFiles() {
            const snap = await getDocs(collection(db, "vault_data"));
            const box = document.getElementById('vault_content');
            box.innerHTML = "";
            snap.forEach((fileDoc) => {
                const f = fileDoc.data();
                const d = document.createElement('div');
                d.className = "file-card";
                d.innerHTML = `<h4>${f.name}</h4>` + (f.type === 'pdf' ? 
                    `<iframe src="${f.content}" width="100%" height="500px"></iframe>` : 
                    `<img src="${f.content}" style="max-width:100%">`);
                box.appendChild(d);
            });
        }

        document.getElementById('upBtn').onclick = async () => {
            const file = document.getElementById('fileInput').files[0];
            if(!file) return;
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = async () => {
                await addDoc(collection(db, "vault_data"), {
                    name: file.name,
                    content: reader.result,
                    type: file.type.includes('pdf') ? 'pdf' : 'image',
                    date: new Date().toISOString()
                });
                loadFiles();
            };
        };
    </script>
</body>
</html>

