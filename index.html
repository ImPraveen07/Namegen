<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page not found Â· GitHub</title>
    <style>
        body { background-color: #fff; margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif; color: #24292e; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; user-select: none; }
        #decoy_ui { text-align: center; padding: 30px; max-width: 800px; }
        h1 { font-size: 80px; font-weight: 300; margin: 0; line-height: 1.2; }
        h2 { font-size: 24px; font-weight: 400; color: #6a737d; margin: 25px 0; }
        p { font-size: 18px; line-height: 1.6; color: #586069; margin: 10px 0; }
        .link-blue { color: #0366d6; text-decoration: none; }
        code { font-family: ui-monospace, SFMono-Regular, Consolas, monospace; background-color: rgba(27,31,35,0.05); padding: 3px 5px; border-radius: 3px; font-size: 85%; }
        
        #vault_ui { display: none; text-align: center; background: #fff; padding: 30px; border: 1px solid #d1d5da; border-radius: 6px; width: 300px; box-shadow: 0 8px 24px rgba(149,157,165,0.2); }
        input { display: block; width: 100%; margin: 10px 0; padding: 10px; border: 1px solid #d1d5da; border-radius: 3px; box-sizing: border-box; }
        button { width: 100%; padding: 10px; background: #2ea44f; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; margin-top: 10px; }
        
        #data_view { display: none; width: 95%; max-width: 1100px; height: 90vh; overflow-y: auto; background: white; padding: 20px; position: fixed; top: 0; left: 0; z-index: 9999; }
        .file-card { border-bottom: 1px solid #eee; padding: 20px 0; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="decoy_ui">
        <h1>404</h1>
        <h2>File not found</h2>
        <p>The site configured at this address does not contain the requested file.</p>
        <p>If this is your site, make sure that the filename case matches the URL.<br>
        For root URLs (like <code>http://example.com/</code>) you must provide an <code>index.html</code> file.</p>
        <p><a href="#" class="link-blue">Read the full documentation</a> for more information about using <strong>GitHub Pages</strong>.</p>
    </div>

    <div id="vault_ui">
        <h3 style="margin-top:0;">System Integrity Error</h3>
        <p style="font-size: 13px; color: #d73a49;">Critical: Hardware Buffer Mismatch.</p>
        <input type="password" id="pass_field" placeholder="System ID">
        <input type="text" id="user_field" placeholder="Error Code">
        <button id="auth_btn">Verify & Resume</button>
    </div>

    <div id="data_view">
        <div style="display:flex; justify-content: space-between; align-items: center;">
            <h2 style="margin:0;">Secure Cloud Storage</h2>
            <button onclick="location.reload()" style="width:auto; background:#d73a49;">Lock Vault</button>
        </div>
        <hr>
        <div id="vault_content"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDoc, doc, getDocs } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD7IPQ8jg2u7E1nnUkGQHXDyVbfmgvX0XE",
            authDomain: "annanajjzjdidkkd.firebaseapp.com",
            projectId: "annanajjzjdidkkd",
            storageBucket: "annanajjzjdidkkd.firebasestorage.app",
            appId: "1:903254725150:web:43195942abe037c4c4940f"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- TRIGGER LOGIC ---
        let timer;
        const params = new URLSearchParams(window.location.search);
        
        if(params.get('access') === 'Value') {
            const start = () => timer = setTimeout(() => {
                document.getElementById('decoy_ui').style.display = 'none';
                document.getElementById('vault_ui').style.display = 'block';
            }, 5000);
            
            document.addEventListener('mousedown', start);
            document.addEventListener('touchstart', start);
            document.addEventListener('mouseup', () => clearTimeout(timer));
            document.addEventListener('touchend', () => clearTimeout(timer));
        }

        // --- AUTH LOGIC ---
        document.getElementById('auth_btn').onclick = async () => {
            const pInput = document.getElementById('pass_field').value;
            const uInput = document.getElementById('user_field').value;

            try {
                const snap = await getDoc(doc(db, "system_config", "vault_secrets"));
                if (snap.exists()) {
                    const data = snap.data();
                    // Matching DB fields: secret_pass and secret_user
                    // Field Swap: Password in Top Box, Username in Bottom
                    if (pInput === data.secret_pass && uInput === data.secret_user) {
                        document.getElementById('vault_ui').style.display = 'none';
                        document.getElementById('data_view').style.display = 'block';
                        loadVault();
                    } else {
                        alert("Verification Failed");
                    }
                }
            } catch (e) {
                console.error(e);
                alert("Permission Error. Check Firebase Rules.");
            }
        };

        async function loadVault() {
            const querySnapshot = await getDocs(collection(db, "vault_data"));
            const container = document.getElementById('vault_content');
            container.innerHTML = "";
            querySnapshot.forEach((doc) => {
                const file = doc.data();
                const div = document.createElement('div');
                div.className = "file-card";
                if(file.type === 'pdf') {
                    div.innerHTML = `<h4>${file.name}</h4><iframe src="${file.content}" width="100%" height="500px"></iframe>`;
                } else {
                    div.innerHTML = `<h4>${file.name}</h4><img src="${file.content}" style="max-width:100%">`;
                }
                container.appendChild(div);
            });
        }
    </script>
</body>
</html>

